import 'package:flutter/material.dart';\nimport 'package:get/get.dart';\nimport '../controllers/care_controller.dart';\n\nclass CareView extends GetView<CareController> {\n  const CareView({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Plant Care'),\n        bottom: TabBar(\n          controller: controller.tabController,\n          tabs: const [\n            Tab(icon: Icon(Icons.schedule), text: 'Reminders'),\n            Tab(icon: Icon(Icons.calculate), text: 'Calculator'),\n            Tab(icon: Icon(Icons.tips_and_updates), text: 'Tips'),\n          ],\n        ),\n      ),\n      body: TabBarView(\n        controller: controller.tabController,\n        children: const [\n          _RemindersTab(),\n          _CalculatorTab(),\n          _TipsTab(),\n        ],\n      ),\n    );\n  }\n}\n\nclass _RemindersTab extends StatelessWidget {\n  const _RemindersTab();\n\n  @override\n  Widget build(BuildContext context) {\n    return Padding(\n      padding: const EdgeInsets.all(16),\n      child: Column(\n        children: [\n          // Today's Tasks Card\n          Card(\n            child: Padding(\n              padding: const EdgeInsets.all(16),\n              child: Column(\n                crossAxisAlignment: CrossAxisAlignment.start,\n                children: [\n                  Row(\n                    children: [\n                      Icon(\n                        Icons.today,\n                        color: Theme.of(context).colorScheme.primary,\n                      ),\n                      const SizedBox(width: 8),\n                      Text(\n                        'Today\\'s Tasks',\n                        style: Theme.of(context).textTheme.titleMedium?.copyWith(\n                          fontWeight: FontWeight.bold,\n                        ),\n                      ),\n                    ],\n                  ),\n                  const SizedBox(height: 12),\n                  const _TaskItem(\n                    icon: Icons.water_drop,\n                    task: 'Water Monstera',\n                    time: '9:00 AM',\n                    isCompleted: false,\n                  ),\n                  const _TaskItem(\n                    icon: Icons.eco,\n                    task: 'Fertilize Rose',\n                    time: '2:00 PM',\n                    isCompleted: true,\n                  ),\n                ],\n              ),\n            ),\n          ),\n          const SizedBox(height: 16),\n\n          // Upcoming Tasks\n          Expanded(\n            child: Card(\n              child: Padding(\n                padding: const EdgeInsets.all(16),\n                child: Column(\n                  crossAxisAlignment: CrossAxisAlignment.start,\n                  children: [\n                    Text(\n                      'Upcoming Tasks',\n                      style: Theme.of(context).textTheme.titleMedium?.copyWith(\n                        fontWeight: FontWeight.bold,\n                      ),\n                    ),\n                    const SizedBox(height: 12),\n                    Expanded(\n                      child: ListView(\n                        children: const [\n                          _UpcomingTaskItem(\n                            plant: 'Snake Plant',\n                            task: 'Water',\n                            date: 'Tomorrow',\n                          ),\n                          _UpcomingTaskItem(\n                            plant: 'Fiddle Leaf Fig',\n                            task: 'Rotate',\n                            date: 'In 2 days',\n                          ),\n                          _UpcomingTaskItem(\n                            plant: 'Peace Lily',\n                            task: 'Mist leaves',\n                            date: 'In 3 days',\n                          ),\n                        ],\n                      ),\n                    ),\n                  ],\n                ),\n              ),\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n}\n\nclass _CalculatorTab extends GetView<CareController> {\n  const _CalculatorTab();\n\n  @override\n  Widget build(BuildContext context) {\n    return Padding(\n      padding: const EdgeInsets.all(16),\n      child: Column(\n        crossAxisAlignment: CrossAxisAlignment.start,\n        children: [\n          Card(\n            child: Padding(\n              padding: const EdgeInsets.all(16),\n              child: Column(\n                crossAxisAlignment: CrossAxisAlignment.start,\n                children: [\n                  Text(\n                    'Water Calculator',\n                    style: Theme.of(context).textTheme.titleLarge?.copyWith(\n                      fontWeight: FontWeight.bold,\n                    ),\n                  ),\n                  const SizedBox(height: 16),\n                  \n                  // Pot Size Input\n                  TextField(\n                    controller: controller.potSizeController,\n                    keyboardType: TextInputType.number,\n                    decoration: const InputDecoration(\n                      labelText: 'Pot Size (inches)',\n                      hintText: 'Enter pot diameter',\n                      prefixIcon: Icon(Icons.straighten),\n                    ),\n                  ),\n                  const SizedBox(height: 16),\n                  \n                  // Plant Type Dropdown\n                  Obx(() => DropdownButtonFormField<String>(\n                    value: controller.selectedPlantType,\n                    decoration: const InputDecoration(\n                      labelText: 'Plant Type',\n                      prefixIcon: Icon(Icons.local_florist),\n                    ),\n                    items: controller.plantTypes.map((type) {\n                      return DropdownMenuItem(\n                        value: type,\n                        child: Text(type),\n                      );\n                    }).toList(),\n                    onChanged: (value) => controller.setPlantType(value!),\n                  )),\n                  const SizedBox(height: 16),\n                  \n                  // Season Dropdown\n                  Obx(() => DropdownButtonFormField<String>(\n                    value: controller.selectedSeason,\n                    decoration: const InputDecoration(\n                      labelText: 'Season',\n                      prefixIcon: Icon(Icons.wb_sunny),\n                    ),\n                    items: controller.seasons.map((season) {\n                      return DropdownMenuItem(\n                        value: season,\n                        child: Text(season),\n                      );\n                    }).toList(),\n                    onChanged: (value) => controller.setSeason(value!),\n                  )),\n                  const SizedBox(height: 20),\n                  \n                  // Calculate Button\n                  SizedBox(\n                    width: double.infinity,\n                    child: ElevatedButton(\n                      onPressed: controller.calculateWater,\n                      child: const Text('Calculate Water Amount'),\n                    ),\n                  ),\n                ],\n              ),\n            ),\n          ),\n          const SizedBox(height: 16),\n          \n          // Result Card\n          Obx(() {\n            if (controller.calculatedAmount > 0) {\n              return Card(\n                child: Padding(\n                  padding: const EdgeInsets.all(16),\n                  child: Column(\n                    children: [\n                      Icon(\n                        Icons.water_drop,\n                        size: 48,\n                        color: Theme.of(context).colorScheme.primary,\n                      ),\n                      const SizedBox(height: 8),\n                      Text(\n                        'Recommended Amount',\n                        style: Theme.of(context).textTheme.titleMedium,\n                      ),\n                      const SizedBox(height: 4),\n                      Text(\n                        '${controller.calculatedAmount.toStringAsFixed(1)} cups',\n                        style: Theme.of(context).textTheme.headlineMedium?.copyWith(\n                          fontWeight: FontWeight.bold,\n                          color: Theme.of(context).colorScheme.primary,\n                        ),\n                      ),\n                      const SizedBox(height: 8),\n                      Text(\n                        'Water slowly until soil is moist but not soggy',\n                        style: Theme.of(context).textTheme.bodySmall?.copyWith(\n                          color: Theme.of(context).colorScheme.onSurface.withOpacity(0.7),\n                        ),\n                        textAlign: TextAlign.center,\n                      ),\n                    ],\n                  ),\n                ),\n              );\n            }\n            return const SizedBox.shrink();\n          }),\n        ],\n      ),\n    );\n  }\n}\n\nclass _TipsTab extends StatelessWidget {\n  const _TipsTab();\n\n  @override\n  Widget build(BuildContext context) {\n    return ListView(\n      padding: const EdgeInsets.all(16),\n      children: const [\n        _TipCard(\n          icon: Icons.water_drop,\n          title: 'Watering Tips',\n          content: 'Check soil moisture before watering. Most plants prefer soil that\\'s slightly dry between waterings.',\n        ),\n        _TipCard(\n          icon: Icons.wb_sunny,\n          title: 'Light Requirements',\n          content: 'Rotate your plants weekly to ensure even growth. Most houseplants prefer bright, indirect light.',\n        ),\n        _TipCard(\n          icon: Icons.thermostat,\n          title: 'Temperature Control',\n          content: 'Keep plants away from heating vents and air conditioners. Most houseplants thrive in 65-75Â°F.',\n        ),\n        _TipCard(\n          icon: Icons.opacity,\n          title: 'Humidity',\n          content: 'Increase humidity by grouping plants together or using a humidifier. Many plants prefer 40-60% humidity.',\n        ),\n        _TipCard(\n          icon: Icons.eco,\n          title: 'Fertilizing',\n          content: 'Feed plants during growing season (spring/summer). Use diluted fertilizer every 2-4 weeks.',\n        ),\n      ],\n    );\n  }\n}\n\nclass _TaskItem extends StatelessWidget {\n  final IconData icon;\n  final String task;\n  final String time;\n  final bool isCompleted;\n\n  const _TaskItem({\n    required this.icon,\n    required this.task,\n    required this.time,\n    required this.isCompleted,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    return Padding(\n      padding: const EdgeInsets.symmetric(vertical: 4),\n      child: Row(\n        children: [\n          Icon(\n            isCompleted ? Icons.check_circle : Icons.radio_button_unchecked,\n            color: isCompleted \n                ? Theme.of(context).colorScheme.primary \n                : Theme.of(context).colorScheme.onSurface.withOpacity(0.5),\n          ),\n          const SizedBox(width: 12),\n          Icon(icon, size: 20),\n          const SizedBox(width: 8),\n          Expanded(\n            child: Text(\n              task,\n              style: TextStyle(\n                decoration: isCompleted ? TextDecoration.lineThrough : null,\n                color: isCompleted \n                    ? Theme.of(context).colorScheme.onSurface.withOpacity(0.6)\n                    : null,\n              ),\n            ),\n          ),\n          Text(\n            time,\n            style: Theme.of(context).textTheme.bodySmall?.copyWith(\n              color: Theme.of(context).colorScheme.onSurface.withOpacity(0.6),\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n}\n\nclass _UpcomingTaskItem extends StatelessWidget {\n  final String plant;\n  final String task;\n  final String date;\n\n  const _UpcomingTaskItem({\n    required this.plant,\n    required this.task,\n    required this.date,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    return ListTile(\n      leading: CircleAvatar(\n        backgroundColor: Theme.of(context).colorScheme.primaryContainer,\n        child: Icon(\n          Icons.local_florist,\n          color: Theme.of(context).colorScheme.onPrimaryContainer,\n        ),\n      ),\n      title: Text('$task $plant'),\n      subtitle: Text(date),\n      trailing: IconButton(\n        icon: const Icon(Icons.notifications_none),\n        onPressed: () {},\n      ),\n    );\n  }\n}\n\nclass _TipCard extends StatelessWidget {\n  final IconData icon;\n  final String title;\n  final String content;\n\n  const _TipCard({\n    required this.icon,\n    required this.title,\n    required this.content,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    return Card(\n      margin: const EdgeInsets.only(bottom: 12),\n      child: Padding(\n        padding: const EdgeInsets.all(16),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.start,\n          children: [\n            Row(\n              children: [\n                Icon(\n                  icon,\n                  color: Theme.of(context).colorScheme.primary,\n                ),\n                const SizedBox(width: 12),\n                Text(\n                  title,\n                  style: Theme.of(context).textTheme.titleMedium?.copyWith(\n                    fontWeight: FontWeight.bold,\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 8),\n            Text(\n              content,\n              style: Theme.of(context).textTheme.bodyMedium,\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}"