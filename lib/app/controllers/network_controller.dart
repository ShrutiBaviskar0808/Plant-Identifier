import 'package:get/get.dart';\nimport 'package:connectivity_plus/connectivity_plus.dart';\nimport 'dart:async';\n\nclass NetworkController extends GetxController {\n  final Connectivity _connectivity = Connectivity();\n  final _connectionStatus = ConnectivityResult.none.obs;\n  late StreamSubscription<ConnectivityResult> _connectivitySubscription;\n\n  ConnectivityResult get connectionStatus => _connectionStatus.value;\n  bool get isConnected => _connectionStatus.value != ConnectivityResult.none;\n\n  @override\n  void onInit() {\n    super.onInit();\n    _initConnectivity();\n    _connectivitySubscription = _connectivity.onConnectivityChanged.listen(_updateConnectionStatus);\n  }\n\n  @override\n  void onClose() {\n    _connectivitySubscription.cancel();\n    super.onClose();\n  }\n\n  Future<void> _initConnectivity() async {\n    try {\n      final result = await _connectivity.checkConnectivity();\n      _updateConnectionStatus(result);\n    } catch (e) {\n      _connectionStatus.value = ConnectivityResult.none;\n    }\n  }\n\n  void _updateConnectionStatus(ConnectivityResult result) {\n    _connectionStatus.value = result;\n    \n    if (result == ConnectivityResult.none) {\n      _showNoInternetDialog();\n    }\n  }\n\n  void _showNoInternetDialog() {\n    Get.dialog(\n      AlertDialog(\n        title: const Text('No Internet Connection'),\n        content: const Text(\n          'Please check your internet connection and try again. The app requires internet access to function properly.',\n        ),\n        actions: [\n          TextButton(\n            onPressed: () => Get.back(),\n            child: const Text('OK'),\n          ),\n          ElevatedButton(\n            onPressed: () {\n              Get.back();\n              _initConnectivity();\n            },\n            child: const Text('Retry'),\n          ),\n        ],\n      ),\n      barrierDismissible: false,\n    );\n  }\n\n  void checkConnectivity() {\n    if (!isConnected) {\n      _showNoInternetDialog();\n    }\n  }\n}